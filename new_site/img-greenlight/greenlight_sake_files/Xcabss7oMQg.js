if (self.CavalryLogger) { CavalryLogger.start_js(["CP8gq"]); }

__d('MUFICommentTypingSubscriptionController',['SubscriptionsHandler','UFITypingSubscription','destroyOnUnload'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=15*1000;function l(q){return {friendCount:n(q),otherCount:o(q)};}function m(q){if(q){q=parseInt(q,10);return !isNaN(q)&&isFinite(q)?q:0;}else return 0;}function n(q){var r=q&&q.feedback_typing_subscribe&&q.feedback_typing_subscribe.feedback&&q.feedback_typing_subscribe.feedback.feedback_typers&&q.feedback_typing_subscribe.feedback.feedback_typers.friend_count;return m(r);}function o(q){var r=q&&q.feedback_typing_subscribe&&q.feedback_typing_subscribe.feedback&&q.feedback_typing_subscribe.feedback.feedback_typers&&q.feedback_typing_subscribe.feedback.feedback_typers.other_count;return m(r);}function p(q,r){this.$MUFICommentTypingSubscriptionController1=null;this.$MUFICommentTypingSubscriptionController2=null;this.$MUFICommentTypingSubscriptionController3=r;this.$MUFICommentTypingSubscriptionController4=new h();var s=i.subscribe(q,function(t){this.$MUFICommentTypingSubscriptionController6(t);this.$MUFICommentTypingSubscriptionController7();}.bind(this));if(s)this.$MUFICommentTypingSubscriptionController4.addSubscriptions(s);this.$MUFICommentTypingSubscriptionController5=!!s;j(this.destroy.bind(this));}p.prototype.destroy=function(){this.$MUFICommentTypingSubscriptionController8();this.$MUFICommentTypingSubscriptionController4.release();};p.prototype.unsubscribe=function(){this.destroy();};p.prototype.didSubscribe=function(){return this.$MUFICommentTypingSubscriptionController5;};p.prototype.$MUFICommentTypingSubscriptionController7=function(){this.$MUFICommentTypingSubscriptionController3(l(this.$MUFICommentTypingSubscriptionController1));};p.prototype.$MUFICommentTypingSubscriptionController8=function(){if(this.$MUFICommentTypingSubscriptionController2)clearTimeout(this.$MUFICommentTypingSubscriptionController2);this.$MUFICommentTypingSubscriptionController2=null;this.$MUFICommentTypingSubscriptionController1=null;};p.prototype.$MUFICommentTypingSubscriptionController6=function(q){this.$MUFICommentTypingSubscriptionController8();this.$MUFICommentTypingSubscriptionController1=q;this.$MUFICommentTypingSubscriptionController2=setTimeout(function(){this.$MUFICommentTypingSubscriptionController8();this.$MUFICommentTypingSubscriptionController7();}.bind(this),k);};f.exports=p;}),null);